<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BST Visualizer - Dark Edition</title>
    <style>
        :root {
            --bg: #0f0f0f;
            --card-bg: #1a1a1a;
            --silver: #c0c0c0;
            --silver-dark: #8e8e8e;
            --accent: #ffffff;
            --danger: #ff4d4d;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            background-color: var(--bg); 
            color: var(--silver);
            display: flex; 
            flex-direction: column;
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            padding: 20px;
        }

        .container { 
            background: var(--card-bg); 
            padding: 30px; 
            border-radius: 15px; 
            width: 90%;
            max-width: 800px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5), inset 0 0 1px var(--silver-dark);
            border: 1px solid #333;
        }

        .header {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent);
            border-left: 4px solid var(--silver);
            padding-left: 15px;
            margin-bottom: 25px;
            letter-spacing: 2px;
        }

        .controls { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
            gap: 12px; 
            margin-bottom: 30px; 
        }

        input { 
            background: #252525;
            border: 1px solid #444;
            color: white;
            padding: 12px; 
            border-radius: 5px; 
            outline: none;
            transition: border 0.3s;
        }

        input:focus { border-color: var(--silver); }

        button { 
            padding: 12px; 
            border: 1px solid var(--silver-dark); 
            border-radius: 5px; 
            cursor: pointer; 
            font-weight: bold; 
            background: transparent;
            color: var(--silver);
            transition: all 0.3s;
        }

        button:hover { 
            background: var(--silver);
            color: black;
        }

        .btn-delete:hover {
            background: var(--danger);
            border-color: var(--danger);
            color: white;
        }

        /* Tree Visualization Area */
        #canvas-container {
            width: 100%;
            height: 400px;
            background: #0a0a0a;
            border-radius: 10px;
            overflow: auto;
            position: relative;
            border: 1px solid #222;
        }

        .node {
            position: absolute;
            width: 40px;
            height: 40px;
            background: linear-gradient(145deg, #222, #000);
            border: 2px solid var(--silver);
            color: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.5s ease;
            z-index: 2;
        }

        .line {
            position: absolute;
            background-color: #444;
            height: 2px;
            transform-origin: 0 50%;
            z-index: 1;
        }

        .log {
            margin-top: 15px;
            font-size: 14px;
            color: var(--silver-dark);
            font-family: monospace;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">BST ENGINE _SYSTEM</div>
    
    <div class="controls">
        <input type="number" id="val" placeholder="Value">
        <input type="number" id="newVal" placeholder="Target Value">
        <button onclick="doCreate()">INSERT</button>
        <button onclick="doSearch()">SEARCH</button>
        <button onclick="doUpdate()">UPDATE</button>
        <button class="btn-delete" onclick="doDelete()">DELETE</button>
    </div>

    <div id="canvas-container"></div>
    <div id="status" class="log">> System ready...</div>
</div>

<script>
    class Node {
        constructor(val) {
            this.val = val;
            this.left = null;
            this.right = null;
        }
    }

    class BST {
        constructor() { this.root = null; }

        insert(val) {
            const newNode = new Node(val);
            if (!this.root) { this.root = newNode; return; }
            let curr = this.root;
            while (true) {
                if (val === curr.val) return;
                if (val < curr.val) {
                    if (!curr.left) { curr.left = newNode; break; }
                    curr = curr.left;
                } else {
                    if (!curr.right) { curr.right = newNode; break; }
                    curr = curr.right;
                }
            }
        }

        search(val) {
            let curr = this.root;
            while (curr) {
                if (val === curr.val) return true;
                curr = val < curr.val ? curr.left : curr.right;
            }
            return false;
        }

        remove(val) {
            this.root = this._removeNode(this.root, val);
        }

        _removeNode(node, val) {
            if (!node) return null;
            if (val < node.val) node.left = this._removeNode(node.left, val);
            else if (val > node.val) node.right = this._removeNode(node.right, val);
            else {
                if (!node.left) return node.right;
                if (!node.right) return node.left;
                let temp = this._min(node.right);
                node.val = temp.val;
                node.right = this._removeNode(node.right, temp.val);
            }
            return node;
        }

        _min(node) {
            while (node.left) node = node.left;
            return node;
        }
    }

    const tree = new BST();
    const container = document.getElementById('canvas-container');

    function drawTree(node, x, y, spacing) {
        if (!node) return;

        // Draw Left Link
        if (node.left) {
            drawLine(x, y, x - spacing, y + 60);
            drawTree(node.left, x - spacing, y + 60, spacing / 1.8);
        }

        // Draw Right Link
        if (node.right) {
            drawLine(x, y, x + spacing, y + 60);
            drawTree(node.right, x + spacing, y + 60, spacing / 1.8);
        }

        // Draw Node
        const div = document.createElement('div');
        div.className = 'node';
        div.style.left = (x - 20) + 'px';
        div.style.top = (y - 20) + 'px';
        div.innerText = node.val;
        container.appendChild(div);
    }

    function drawLine(x1, y1, x2, y2) {
        const length = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
        const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
        const line = document.createElement('div');
        line.className = 'line';
        line.style.width = length + 'px';
        line.style.left = x1 + 'px';
        line.style.top = y1 + 'px';
        line.style.transform = `rotate(${angle}deg)`;
        container.appendChild(line);
    }

    function updateUI(msg) {
        container.innerHTML = '';
        drawTree(tree.root, container.offsetWidth / 2, 50, container.offsetWidth / 4);
        document.getElementById('status').innerText = `> ${msg}`;
    }

    function doCreate() {
        const v = parseInt(document.getElementById('val').value);
        if (isNaN(v)) return;
        tree.insert(v);
        updateUI(`EXECUTE: Inserted value ${v}`);
    }

    function doSearch() {
        const v = parseInt(document.getElementById('val').value);
        if (isNaN(v)) return;
        const found = tree.search(v);
        updateUI(found ? `RESULT: Value ${v} located in tree` : `RESULT: Value ${v} not found`);
    }

    function doUpdate() {
        const oldV = parseInt(document.getElementById('val').value);
        const newV = parseInt(document.getElementById('newVal').value);
        if (isNaN(oldV) || isNaN(newV)) return;
        if (tree.search(oldV)) {
            tree.remove(oldV);
            tree.insert(newV);
            updateUI(`EXECUTE: Updated ${oldV} to ${newV}`);
        } else {
            updateUI(`ERROR: Target ${oldV} not found for update`);
        }
    }

    function doDelete() {
        const v = parseInt(document.getElementById('val').value);
        if (isNaN(v)) return;
        tree.remove(v);
        updateUI(`EXECUTE: Deleted value ${v}`);
    }

    window.onresize = () => updateUI("System Resized");
</script>

</body>
</html>